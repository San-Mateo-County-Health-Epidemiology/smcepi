---
title: "Life Expectancy"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Life Expectancy}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r setup, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

Public Health England (PHE) has an excel file that will calculate life expectancy using an abridged life table. The `make_life_table()` function in this package was written to exactly replicate the formulas and methods used in that excel file. The PHE excel file can be found  [here](https://fingertips.phe.org.uk/documents/phe%20life%20expectancy%20calculator.xlsm). 

The `make_life_table()` function is designed to work with grouped data so that you can calculate life tables for multiple groups at once. It also allows for the use of ACS age groups in addition to the age groups included in the PHE excel calculator. 

* PHE age groups: 0, 1-4, 5-9, 10-14 ... 80-84, 85-89, 90+  
* ACS age groups: 0-4, 5-9, 10-14 ... 80-84, 85+

## make_life_table()

The output from the make_life_table() has every column that is included in the PHE excel calculator. This example includes the same death and population numbers that are in the PHE excel calculator:

```{r}
test_data <- data.frame(
  group = c(rep("phe", 20), rep("simulated", 20)),
  ages = rep(c("0", "1-4", "5-9", "10-14", "15-19","20-24", "25-29", "30-34", "35-39", "40-44",
  "45-49", "50-54", "55-59", "60-64", "65-69", "70-74", "75-79", "80-84", "85-89", "90+"), 2),
  deaths = c(206, 37, 23, 23, 105, 162, 268, 314, 413, 584, 954,
            1359, 1912, 2824, 4507, 5851, 7117, 8192, 7745, 6442,
            232, 30, 41, 22, 194, 168, 315, 313, 406, 643, 963,
            1446, 1979, 2814, 4587, 5874, 7111, 8221, 7825, 6540),
  population_est = c(50698, 215400, 280458, 258105, 282062, 329060, 306097, 274544, 260415,
           267450, 311314, 324311, 296825, 271339, 284608, 228062, 162785, 111263, 58987, 26016,
           51578, 215512, 279462, 257256, 282348, 329111, 306514, 274397, 259847, 267045,
           311791, 323739, 297453, 271344, 285047, 227655, 162922, 110554, 58886, 26243))
```

## get_le()

