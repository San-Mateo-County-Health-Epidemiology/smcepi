<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Life Expectancy • smcepi</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Life Expectancy">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-secondary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">smcepi</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/azure_helpers_overview.html">Azure Helpers</a></li>
    <li><a class="dropdown-item" href="../articles/file-management.html">Misc File Management</a></li>
    <li><a class="dropdown-item" href="../articles/life-expectancy-overview.html">Life Expectancy</a></li>
    <li><a class="dropdown-item" href="../articles/smc-geographies.html">San Mateo Geography Functions</a></li>
    <li><a class="dropdown-item" href="../articles/style_guide_templates.html">Style Guide Templates</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/San-Mateo-County-Health-Epidemiology/smcepi/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Life Expectancy</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/San-Mateo-County-Health-Epidemiology/smcepi/blob/main/vignettes/life-expectancy-overview.Rmd" class="external-link"><code>vignettes/life-expectancy-overview.Rmd</code></a></small>
      <div class="d-none name"><code>life-expectancy-overview.Rmd</code></div>
    </div>

    
    
<p>Public Health England (PHE) has an excel file that will calculate
life expectancy using an abridged life table. The
<code><a href="../reference/make_life_table.html">make_life_table()</a></code> function in this package was written to
exactly replicate the formulas and methods used in that excel file. The
PHE excel file can be found <a href="https://fingertips.phe.org.uk/documents/phe%20life%20expectancy%20calculator.xlsm" class="external-link">here</a>.</p>
<p>The <code><a href="../reference/make_life_table.html">make_life_table()</a></code> function is designed to work with
grouped data so that you can calculate life tables for multiple groups
at once. It also allows for the use of ACS age groups in addition to the
age groups included in the PHE excel calculator.</p>
<ul>
<li>PHE age groups: 0, 1-4, 5-9, 10-14 … 80-84, 85-89, 90+<br>
</li>
<li>ACS age groups: 0-4, 5-9, 10-14 … 80-84, 85+</li>
</ul>
<div class="section level2">
<h2 id="make_life_table">make_life_table()<a class="anchor" aria-label="anchor" href="#make_life_table"></a>
</h2>
<div class="section level3">
<h3 id="basic-usage">Basic usage<a class="anchor" aria-label="anchor" href="#basic-usage"></a>
</h3>
<p>The output from the <code><a href="../reference/make_life_table.html">make_life_table()</a></code> function has every
column that is included in the PHE excel calculator. This example
includes the same death and population numbers that are in the PHE excel
calculator:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  age_cat <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"0"</span>, <span class="st">"1-4"</span>, <span class="st">"5-9"</span>, <span class="st">"10-14"</span>, <span class="st">"15-19"</span>,<span class="st">"20-24"</span>, <span class="st">"25-29"</span>, <span class="st">"30-34"</span>, <span class="st">"35-39"</span>, <span class="st">"40-44"</span>,</span>
<span>  <span class="st">"45-49"</span>, <span class="st">"50-54"</span>, <span class="st">"55-59"</span>, <span class="st">"60-64"</span>, <span class="st">"65-69"</span>, <span class="st">"70-74"</span>, <span class="st">"75-79"</span>, <span class="st">"80-84"</span>, <span class="st">"85-89"</span>, <span class="st">"90+"</span><span class="op">)</span>,</span>
<span>  deaths <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">206</span>, <span class="fl">37</span>, <span class="fl">23</span>, <span class="fl">23</span>, <span class="fl">105</span>, <span class="fl">162</span>, <span class="fl">268</span>, <span class="fl">314</span>, <span class="fl">413</span>, <span class="fl">584</span>, <span class="fl">954</span>,</span>
<span>            <span class="fl">1359</span>, <span class="fl">1912</span>, <span class="fl">2824</span>, <span class="fl">4507</span>, <span class="fl">5851</span>, <span class="fl">7117</span>, <span class="fl">8192</span>, <span class="fl">7745</span>, <span class="fl">6442</span><span class="op">)</span>,</span>
<span>  population <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">50698</span>, <span class="fl">215400</span>, <span class="fl">280458</span>, <span class="fl">258105</span>, <span class="fl">282062</span>, <span class="fl">329060</span>, <span class="fl">306097</span>, <span class="fl">274544</span>, <span class="fl">260415</span>,</span>
<span>           <span class="fl">267450</span>, <span class="fl">311314</span>, <span class="fl">324311</span>, <span class="fl">296825</span>, <span class="fl">271339</span>, <span class="fl">284608</span>, <span class="fl">228062</span>, <span class="fl">162785</span>, <span class="fl">111263</span>, <span class="fl">58987</span>, <span class="fl">26016</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">life_table1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/make_life_table.html">make_life_table</a></span><span class="op">(</span><span class="va">data1</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">life_table1</span><span class="op">)</span></span>
<span><span class="co">#&gt; 'data.frame':    20 obs. of  20 variables:</span></span>
<span><span class="co">#&gt;  $ age_cat            : chr  "0" "1-4" "5-9" "10-14" ...</span></span>
<span><span class="co">#&gt;  $ deaths             : num  206 37 23 23 105 162 268 314 413 584 ...</span></span>
<span><span class="co">#&gt;  $ population         : num  50698 215400 280458 258105 282062 ...</span></span>
<span><span class="co">#&gt;  $ start_age          : num  0 1 5 10 15 20 25 30 35 40 ...</span></span>
<span><span class="co">#&gt;  $ int_width          : num  1 4 5 5 5 5 5 5 5 5 ...</span></span>
<span><span class="co">#&gt;  $ fract_surv         : num  0.1 0.5 0.5 0.5 0.5 0.5 0.5 0.5 0.5 0.5 ...</span></span>
<span><span class="co">#&gt;  $ death_rate         : num  4.06e-03 1.72e-04 8.20e-05 8.91e-05 3.72e-04 ...</span></span>
<span><span class="co">#&gt;  $ prob_dying         : num  0.004048 0.000687 0.00041 0.000445 0.00186 ...</span></span>
<span><span class="co">#&gt;  $ prob_surv          : num  0.996 0.999 1 1 0.998 ...</span></span>
<span><span class="co">#&gt;  $ num_alive_int      : num  100000 99595 99527 99486 99442 ...</span></span>
<span><span class="co">#&gt;  $ num_dying_int      : num  404.8 68.4 40.8 44.3 184.9 ...</span></span>
<span><span class="co">#&gt;  $ pers_yrs_lived_int : num  99636 398244 497532 497319 496746 ...</span></span>
<span><span class="co">#&gt;  $ pers_yrs_lived_past: num  7832451 7732815 7334572 6837040 6339721 ...</span></span>
<span><span class="co">#&gt;  $ obs_le_int         : num  78.3 77.6 73.7 68.7 63.8 ...</span></span>
<span><span class="co">#&gt;  $ sample_var         : num  7.92e-08 1.27e-08 7.30e-09 8.62e-09 3.29e-08 ...</span></span>
<span><span class="co">#&gt;  $ weighted_var       : num  4888352 724166 367032 374649 1224149 ...</span></span>
<span><span class="co">#&gt;  $ sample_var_pers_yrs: num  39355415 34467062 33742896 33375864 33001214 ...</span></span>
<span><span class="co">#&gt;  $ sample_var_obs_le  : num  0.00394 0.00347 0.00341 0.00337 0.00334 ...</span></span>
<span><span class="co">#&gt;  $ ci_low_95          : num  78.2 77.5 73.6 68.6 63.6 58.8 53.9 49.1 44.4 39.7 ...</span></span>
<span><span class="co">#&gt;  $ ci_high_95         : num  78.4 77.8 73.8 68.8 63.9 59 54.1 49.3 44.6 39.9 ...</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="additional-options">Additional options<a class="anchor" aria-label="anchor" href="#additional-options"></a>
</h3>
<div class="section level4">
<h4 id="multiple-groups">Multiple groups<a class="anchor" aria-label="anchor" href="#multiple-groups"></a>
</h4>
<p>One benefit to using the <code><a href="../reference/make_life_table.html">make_life_table()</a></code> function
instead of the excel file is that you can create full life tables for
multiple groups at once. You just specify the grouping variables with
the <code>grouping_vars</code> argument.</p>
<p>Here we have a version of <code>data1</code> but with an additional
set of data that were simulated based on the data entered into the PHE
excel file.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  group <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"phe"</span>, <span class="fl">20</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"simulated"</span>, <span class="fl">20</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  age_cat <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"0"</span>, <span class="st">"1-4"</span>, <span class="st">"5-9"</span>, <span class="st">"10-14"</span>, <span class="st">"15-19"</span>,<span class="st">"20-24"</span>, <span class="st">"25-29"</span>, <span class="st">"30-34"</span>, <span class="st">"35-39"</span>, <span class="st">"40-44"</span>,</span>
<span>                 <span class="st">"45-49"</span>, <span class="st">"50-54"</span>, <span class="st">"55-59"</span>, <span class="st">"60-64"</span>, <span class="st">"65-69"</span>, <span class="st">"70-74"</span>, <span class="st">"75-79"</span>, <span class="st">"80-84"</span>, <span class="st">"85-89"</span>, <span class="st">"90+"</span><span class="op">)</span>, <span class="fl">2</span><span class="op">)</span>,</span>
<span>  deaths <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">206</span>, <span class="fl">37</span>, <span class="fl">23</span>, <span class="fl">23</span>, <span class="fl">105</span>, <span class="fl">162</span>, <span class="fl">268</span>, <span class="fl">314</span>, <span class="fl">413</span>, <span class="fl">584</span>, <span class="fl">954</span>,</span>
<span>               <span class="fl">1359</span>, <span class="fl">1912</span>, <span class="fl">2824</span>, <span class="fl">4507</span>, <span class="fl">5851</span>, <span class="fl">7117</span>, <span class="fl">8192</span>, <span class="fl">7745</span>, <span class="fl">6442</span>,</span>
<span>               <span class="fl">232</span>, <span class="fl">30</span>, <span class="fl">41</span>, <span class="fl">22</span>, <span class="fl">194</span>, <span class="fl">168</span>, <span class="fl">315</span>, <span class="fl">313</span>, <span class="fl">406</span>, <span class="fl">643</span>, <span class="fl">963</span>,</span>
<span>               <span class="fl">1446</span>, <span class="fl">1979</span>, <span class="fl">2814</span>, <span class="fl">4587</span>, <span class="fl">5874</span>, <span class="fl">7111</span>, <span class="fl">8221</span>, <span class="fl">7825</span>, <span class="fl">6540</span><span class="op">)</span>,</span>
<span>  population <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">50698</span>, <span class="fl">215400</span>, <span class="fl">280458</span>, <span class="fl">258105</span>, <span class="fl">282062</span>, <span class="fl">329060</span>, <span class="fl">306097</span>, <span class="fl">274544</span>, <span class="fl">260415</span>,</span>
<span>                       <span class="fl">267450</span>, <span class="fl">311314</span>, <span class="fl">324311</span>, <span class="fl">296825</span>, <span class="fl">271339</span>, <span class="fl">284608</span>, <span class="fl">228062</span>, <span class="fl">162785</span>, <span class="fl">111263</span>, <span class="fl">58987</span>, <span class="fl">26016</span>,</span>
<span>                       <span class="fl">51578</span>, <span class="fl">215512</span>, <span class="fl">279462</span>, <span class="fl">257256</span>, <span class="fl">282348</span>, <span class="fl">329111</span>, <span class="fl">306514</span>, <span class="fl">274397</span>, <span class="fl">259847</span>, <span class="fl">267045</span>,</span>
<span>                       <span class="fl">311791</span>, <span class="fl">323739</span>, <span class="fl">297453</span>, <span class="fl">271344</span>, <span class="fl">285047</span>, <span class="fl">227655</span>, <span class="fl">162922</span>, <span class="fl">110554</span>, <span class="fl">58886</span>, <span class="fl">26243</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Then you can create life tables for each group by specifying that
<code>grouping_vars = "group"</code>. The <code>grouping_vars</code>
argument can take a list of variables if you want to group by year and
geography (for example).</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">life_table2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/make_life_table.html">make_life_table</a></span><span class="op">(</span><span class="va">data2</span>,</span>
<span>                               grouping_vars <span class="op">=</span> <span class="st">"group"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">life_table2</span><span class="op">)</span></span>
<span><span class="co">#&gt; 'data.frame':    40 obs. of  21 variables:</span></span>
<span><span class="co">#&gt;  $ group              : chr  "phe" "phe" "phe" "phe" ...</span></span>
<span><span class="co">#&gt;  $ age_cat            : chr  "0" "1-4" "5-9" "10-14" ...</span></span>
<span><span class="co">#&gt;  $ deaths             : num  206 37 23 23 105 162 268 314 413 584 ...</span></span>
<span><span class="co">#&gt;  $ population         : num  50698 215400 280458 258105 282062 ...</span></span>
<span><span class="co">#&gt;  $ start_age          : num  0 1 5 10 15 20 25 30 35 40 ...</span></span>
<span><span class="co">#&gt;  $ int_width          : num  1 4 5 5 5 5 5 5 5 5 ...</span></span>
<span><span class="co">#&gt;  $ fract_surv         : num  0.1 0.5 0.5 0.5 0.5 0.5 0.5 0.5 0.5 0.5 ...</span></span>
<span><span class="co">#&gt;  $ death_rate         : num  4.06e-03 1.72e-04 8.20e-05 8.91e-05 3.72e-04 ...</span></span>
<span><span class="co">#&gt;  $ prob_dying         : num  0.004048 0.000687 0.00041 0.000445 0.00186 ...</span></span>
<span><span class="co">#&gt;  $ prob_surv          : num  0.996 0.999 1 1 0.998 ...</span></span>
<span><span class="co">#&gt;  $ num_alive_int      : num  100000 99595 99527 99486 99442 ...</span></span>
<span><span class="co">#&gt;  $ num_dying_int      : num  404.8 68.4 40.8 44.3 184.9 ...</span></span>
<span><span class="co">#&gt;  $ pers_yrs_lived_int : num  99636 398244 497532 497319 496746 ...</span></span>
<span><span class="co">#&gt;  $ pers_yrs_lived_past: num  7832451 7732815 7334572 6837040 6339721 ...</span></span>
<span><span class="co">#&gt;  $ obs_le_int         : num  78.3 77.6 73.7 68.7 63.8 ...</span></span>
<span><span class="co">#&gt;  $ sample_var         : num  7.92e-08 1.27e-08 7.30e-09 8.62e-09 3.29e-08 ...</span></span>
<span><span class="co">#&gt;  $ weighted_var       : num  4888352 724166 367032 374649 1224149 ...</span></span>
<span><span class="co">#&gt;  $ sample_var_pers_yrs: num  39355415 34467062 33742896 33375864 33001214 ...</span></span>
<span><span class="co">#&gt;  $ sample_var_obs_le  : num  0.00394 0.00347 0.00341 0.00337 0.00334 ...</span></span>
<span><span class="co">#&gt;  $ ci_low_95          : num  78.2 77.5 73.6 68.6 63.6 58.8 53.9 49.1 44.4 39.7 ...</span></span>
<span><span class="co">#&gt;  $ ci_high_95         : num  78.4 77.8 73.8 68.8 63.9 59 54.1 49.3 44.6 39.9 ...</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="renaming-columns">Renaming columns<a class="anchor" aria-label="anchor" href="#renaming-columns"></a>
</h4>
<p>The function expects a <code>data.frame</code> with a minimum of
three columns:</p>
<ul>
<li>age categories (<code>age_cat</code>): this should be a character
variable with the start age and end age separated by a <code>-</code>.
Ex: <code>c("0", "1-4", "5-9", "10-14", ..."90+")</code>.</li>
<li>death counts (<code>deaths</code>): this should be a numeric
variable with the number of deaths that occurred in each age group for
each interval</li>
<li>population years (<code>population</code>): this should be a numeric
variable with the number of population years in each group for each
interval</li>
</ul>
<p>If your variables aren’t named <code>"age_cat"</code>,
<code>"deaths"</code> and <code>"population"</code>, you can pass your
variable names to the function using the <code>age_cat_var</code>,
<code>deaths_var</code> and <code>population_var</code> arguments. For
example:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  ages <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"0"</span>, <span class="st">"1-4"</span>, <span class="st">"5-9"</span>, <span class="st">"10-14"</span>, <span class="st">"15-19"</span>,<span class="st">"20-24"</span>, <span class="st">"25-29"</span>, <span class="st">"30-34"</span>, <span class="st">"35-39"</span>, <span class="st">"40-44"</span>,</span>
<span>  <span class="st">"45-49"</span>, <span class="st">"50-54"</span>, <span class="st">"55-59"</span>, <span class="st">"60-64"</span>, <span class="st">"65-69"</span>, <span class="st">"70-74"</span>, <span class="st">"75-79"</span>, <span class="st">"80-84"</span>, <span class="st">"85-89"</span>, <span class="st">"90+"</span><span class="op">)</span>,</span>
<span>  death_count <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">206</span>, <span class="fl">37</span>, <span class="fl">23</span>, <span class="fl">23</span>, <span class="fl">105</span>, <span class="fl">162</span>, <span class="fl">268</span>, <span class="fl">314</span>, <span class="fl">413</span>, <span class="fl">584</span>, <span class="fl">954</span>,</span>
<span>            <span class="fl">1359</span>, <span class="fl">1912</span>, <span class="fl">2824</span>, <span class="fl">4507</span>, <span class="fl">5851</span>, <span class="fl">7117</span>, <span class="fl">8192</span>, <span class="fl">7745</span>, <span class="fl">6442</span><span class="op">)</span>,</span>
<span>  population_years <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">50698</span>, <span class="fl">215400</span>, <span class="fl">280458</span>, <span class="fl">258105</span>, <span class="fl">282062</span>, <span class="fl">329060</span>, <span class="fl">306097</span>, <span class="fl">274544</span>, <span class="fl">260415</span>,</span>
<span>           <span class="fl">267450</span>, <span class="fl">311314</span>, <span class="fl">324311</span>, <span class="fl">296825</span>, <span class="fl">271339</span>, <span class="fl">284608</span>, <span class="fl">228062</span>, <span class="fl">162785</span>, <span class="fl">111263</span>, <span class="fl">58987</span>, <span class="fl">26016</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">life_table1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/make_life_table.html">make_life_table</a></span><span class="op">(</span><span class="va">data2</span>,</span>
<span>                               age_cat_var <span class="op">=</span> <span class="st">"ages"</span>,</span>
<span>                               deaths_var <span class="op">=</span> <span class="st">"death_count"</span>,</span>
<span>                               population_var <span class="op">=</span> <span class="st">"population_years"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">life_table1</span><span class="op">)</span></span>
<span><span class="co">#&gt; 'data.frame':    20 obs. of  20 variables:</span></span>
<span><span class="co">#&gt;  $ age_cat            : chr  "0" "1-4" "5-9" "10-14" ...</span></span>
<span><span class="co">#&gt;  $ deaths             : num  206 37 23 23 105 162 268 314 413 584 ...</span></span>
<span><span class="co">#&gt;  $ population         : num  50698 215400 280458 258105 282062 ...</span></span>
<span><span class="co">#&gt;  $ start_age          : num  0 1 5 10 15 20 25 30 35 40 ...</span></span>
<span><span class="co">#&gt;  $ int_width          : num  1 4 5 5 5 5 5 5 5 5 ...</span></span>
<span><span class="co">#&gt;  $ fract_surv         : num  0.1 0.5 0.5 0.5 0.5 0.5 0.5 0.5 0.5 0.5 ...</span></span>
<span><span class="co">#&gt;  $ death_rate         : num  4.06e-03 1.72e-04 8.20e-05 8.91e-05 3.72e-04 ...</span></span>
<span><span class="co">#&gt;  $ prob_dying         : num  0.004048 0.000687 0.00041 0.000445 0.00186 ...</span></span>
<span><span class="co">#&gt;  $ prob_surv          : num  0.996 0.999 1 1 0.998 ...</span></span>
<span><span class="co">#&gt;  $ num_alive_int      : num  100000 99595 99527 99486 99442 ...</span></span>
<span><span class="co">#&gt;  $ num_dying_int      : num  404.8 68.4 40.8 44.3 184.9 ...</span></span>
<span><span class="co">#&gt;  $ pers_yrs_lived_int : num  99636 398244 497532 497319 496746 ...</span></span>
<span><span class="co">#&gt;  $ pers_yrs_lived_past: num  7832451 7732815 7334572 6837040 6339721 ...</span></span>
<span><span class="co">#&gt;  $ obs_le_int         : num  78.3 77.6 73.7 68.7 63.8 ...</span></span>
<span><span class="co">#&gt;  $ sample_var         : num  7.92e-08 1.27e-08 7.30e-09 8.62e-09 3.29e-08 ...</span></span>
<span><span class="co">#&gt;  $ weighted_var       : num  4888352 724166 367032 374649 1224149 ...</span></span>
<span><span class="co">#&gt;  $ sample_var_pers_yrs: num  39355415 34467062 33742896 33375864 33001214 ...</span></span>
<span><span class="co">#&gt;  $ sample_var_obs_le  : num  0.00394 0.00347 0.00341 0.00337 0.00334 ...</span></span>
<span><span class="co">#&gt;  $ ci_low_95          : num  78.2 77.5 73.6 68.6 63.6 58.8 53.9 49.1 44.4 39.7 ...</span></span>
<span><span class="co">#&gt;  $ ci_high_95         : num  78.4 77.8 73.8 68.8 63.9 59 54.1 49.3 44.6 39.9 ...</span></span></code></pre></div>
</div>
</div>
</div>
<div class="section level2">
<h2 id="get_le">get_le()<a class="anchor" aria-label="anchor" href="#get_le"></a>
</h2>
<div class="section level3">
<h3 id="basic-usage-1">Basic usage<a class="anchor" aria-label="anchor" href="#basic-usage-1"></a>
</h3>
<p>Typically you just want the estimated life expectancy at age 0 and
you don’t need the entire the life table. You can use the
<code><a href="../reference/get_le.html">get_le()</a></code> function on the output of the
<code><a href="../reference/make_life_table.html">make_life_table()</a></code> function for this. Note the
<code><a href="../reference/get_le.html">get_le()</a></code> function was written explicitly to work with the
output of the <code><a href="../reference/make_life_table.html">make_life_table()</a></code> function.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/get_le.html">get_le</a></span><span class="op">(</span><span class="va">life_table1</span><span class="op">)</span></span>
<span><span class="co">#&gt;   obs_le_int ci_low_95 ci_high_95</span></span>
<span><span class="co">#&gt; 1   78.32451      78.2       78.4</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="additional-options-1">Additional options<a class="anchor" aria-label="anchor" href="#additional-options-1"></a>
</h3>
<div class="section level4">
<h4 id="multiple-groups-1">Multiple groups<a class="anchor" aria-label="anchor" href="#multiple-groups-1"></a>
</h4>
<p><code><a href="../reference/get_le.html">get_le()</a></code> also works for grouped data. Like with the
<code><a href="../reference/make_life_table.html">make_life_table()</a></code> function, you should use the
<code>grouping_vars</code> argument to specify the groups:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/get_le.html">get_le</a></span><span class="op">(</span><span class="va">life_table2</span>, grouping_vars <span class="op">=</span> <span class="st">"group"</span><span class="op">)</span></span>
<span><span class="co">#&gt;        group obs_le_int ci_low_95 ci_high_95</span></span>
<span><span class="co">#&gt; 1        phe   78.32451      78.2       78.4</span></span>
<span><span class="co">#&gt; 21 simulated   77.99384      77.9       78.1</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="excluding-confidence-intervals">Excluding confidence intervals<a class="anchor" aria-label="anchor" href="#excluding-confidence-intervals"></a>
</h4>
<p>95% confidence intervals are included in the output of
<code><a href="../reference/get_le.html">get_le()</a></code> by default. You can elect to just get the estimate
by setting <code>include_ci</code> to <code>FALSE</code>.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/get_le.html">get_le</a></span><span class="op">(</span><span class="va">life_table1</span>, include_ci <span class="op">=</span> <span class="cn">F</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 78.32451</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="ages-other-than-0">Ages other than 0<a class="anchor" aria-label="anchor" href="#ages-other-than-0"></a>
</h4>
<p>If you’re interested in the life expectancy at an age group other
than 0, you can specify the age with the <code>start_age</code>
argument. The start age you specify should be numeric and must be the
start of an age group in the data passed through
<code><a href="../reference/make_life_table.html">make_life_table()</a></code>.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/get_le.html">get_le</a></span><span class="op">(</span><span class="va">life_table1</span>, start_age <span class="op">=</span> <span class="fl">30</span><span class="op">)</span></span>
<span><span class="co">#&gt;   obs_le_int ci_low_95 ci_high_95</span></span>
<span><span class="co">#&gt; 8    49.2322      49.1       49.3</span></span></code></pre></div>
</div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by The package maintainer.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
