<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Write large datasets from R to Azure — azure_import_loop • smcepi</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Write large datasets from R to Azure — azure_import_loop"><meta name="description" content="This function creates a table in Azure from R. It is a wrapper function for the DBI::dbWriteTable and the DBI::dbAppendTable functions. This function breaks the dataset to be imported into smaller groups and then loops through the groups. The first group is used to create the table and subsequent groups are appended to the table."><meta property="og:description" content="This function creates a table in Azure from R. It is a wrapper function for the DBI::dbWriteTable and the DBI::dbAppendTable functions. This function breaks the dataset to be imported into smaller groups and then loops through the groups. The first group is used to create the table and subsequent groups are appended to the table."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-secondary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">smcepi</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/azure_helpers_overview.html">Azure Helpers</a></li>
    <li><a class="dropdown-item" href="../articles/data-management.html">Data Management</a></li>
    <li><a class="dropdown-item" href="../articles/file-management.html">File Management</a></li>
    <li><a class="dropdown-item" href="../articles/life-expectancy-overview.html">Life Expectancy</a></li>
    <li><a class="dropdown-item" href="../articles/rse-calculation_overview.html">Relative Standard Error</a></li>
    <li><a class="dropdown-item" href="../articles/sd-rse-calculation_overview.html">Statistical functions</a></li>
    <li><a class="dropdown-item" href="../articles/smc-geographies.html">San Mateo Geography Functions</a></li>
    <li><a class="dropdown-item" href="../articles/style_guide_templates.html">Style Guide Templates</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/San-Mateo-County-Health-Epidemiology/smcepi/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Write large datasets from R to Azure</h1>
      <small class="dont-index">Source: <a href="https://github.com/San-Mateo-County-Health-Epidemiology/smcepi/blob/main/R/azure-helpers.R" class="external-link"><code>R/azure-helpers.R</code></a></small>
      <div class="d-none name"><code>azure_import_loop.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function creates a table in Azure from R. It is a wrapper function for the <code><a href="https://dbi.r-dbi.org/reference/dbWriteTable.html" class="external-link">DBI::dbWriteTable</a></code> and the <code><a href="https://dbi.r-dbi.org/reference/dbAppendTable.html" class="external-link">DBI::dbAppendTable</a></code> functions. This function breaks the dataset to be imported into smaller groups and then loops through the groups. The first group is used to create the table and subsequent groups are appended to the table.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">azure_import_loop</span><span class="op">(</span></span>
<span>  <span class="va">azure_con</span>,</span>
<span>  <span class="va">data</span>,</span>
<span>  <span class="va">group_size</span>,</span>
<span>  <span class="va">table_name</span>,</span>
<span>  field_types <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  table_type <span class="op">=</span> <span class="st">"new"</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-azure-con">azure_con<a class="anchor" aria-label="anchor" href="#arg-azure-con"></a></dt>
<dd><p>A DBI Connection object as returned by <code>dbConnect()</code>. See help text for <code><a href="https://dbi.r-dbi.org/reference/dbWriteTable.html" class="external-link">DBI::dbWriteTable</a></code> for more details</p></dd>


<dt id="arg-data">data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p>A data.frame object you plan to import</p></dd>


<dt id="arg-group-size">group_size<a class="anchor" aria-label="anchor" href="#arg-group-size"></a></dt>
<dd><p>An integer that indicates the size of the import groups. Ex: a group_size of 50 would split the dataset into groups of 50 records and would then import each group at a time</p></dd>


<dt id="arg-table-name">table_name<a class="anchor" aria-label="anchor" href="#arg-table-name"></a></dt>
<dd><p>A string to specify the name of the table in Azure</p></dd>


<dt id="arg-field-types">field_types<a class="anchor" aria-label="anchor" href="#arg-field-types"></a></dt>
<dd><p>Optional parameter to pass a list of varchar(<code>n</code>) lengths for the Azure table. Can be created with the <code><a href="varchar_max.html">smcepi::varchar_max()</a></code> function</p></dd>


<dt id="arg-table-type">table_type<a class="anchor" aria-label="anchor" href="#arg-table-type"></a></dt>
<dd><p>Optional parameter to specify whether or not you're creating a new table (<code>table_type = "new"</code>) or appending data to an existing table (<code>table_type = "existing"</code>). The default is <code>"new"</code></p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>will import the data into azure and will return any errors from the <code><a href="https://dbi.r-dbi.org/reference/dbWriteTable.html" class="external-link">DBI::dbWriteTable</a></code> and the <code><a href="https://dbi.r-dbi.org/reference/dbAppendTable.html" class="external-link">DBI::dbAppendTable</a></code> functions</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">azure_import_loop</span><span class="op">(</span>azure_con <span class="op">=</span> <span class="va">azure_con</span>,</span></span>
<span class="r-in"><span>                  data <span class="op">=</span> <span class="va">data</span>,</span></span>
<span class="r-in"><span>                  group_size <span class="op">=</span> <span class="fl">500</span>,</span></span>
<span class="r-in"><span>                  table_name <span class="op">=</span> <span class="st">"new_azure_table_name"</span>,</span></span>
<span class="r-in"><span>                  field_types <span class="op">=</span> <span class="va">varchar_max</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by The package maintainer.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

